<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button text="بازگشت" defaultHref="/non-conform/tabs/discover"></ion-back-button>
    </ion-buttons>
    <ion-title class="animate__animated animate__fadeIn">بروزرسانی عدم انطباق</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div *ngIf="isLoading" class="ion-text-center">
    <ion-spinner color="primary"></ion-spinner>
  </div>
  <form [formGroup]="form" (ngSubmit)="onEditNc()" *ngIf="!isLoading">
    <ion-grid>
      <ion-row>
        <ion-col size-xs="8" offset-xs="2" size-sm="6" offset-sm="3">
          <ion-item lines="none">
            <ion-label>
              <h2>تاریخ ثبت :{{nonConformity.date | jalali}}</h2>
            </ion-label>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size-xs="6" size-sm="6">
          <ion-item lines="none">
            <ion-label position="stacked">
              <h2>وضعیت عدم انطباق</h2>
            </ion-label>
          </ion-item>
        </ion-col>
        <ion-col size-xs="6" size-sm="6">
          <ion-item lines="none" class="ion-text-center">
            <ion-label><p>بسته</p></ion-label>
            <ion-toggle name="status" formControlName= "status"></ion-toggle>
            <ion-label><p>باز</p></ion-label>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size-sm="6" offset-sm="3">
          <ion-item>
            <ion-label position="floating"><h2>عنوان</h2></ion-label>
            <ion-input name="title" type="text" formControlName="title"></ion-input>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size-sm="6" offset-sm="3" size-xs="12" *ngIf="!form.get('title').valid && form.get('title').touched">
          <ion-item lines="none">
            <ion-label color="danger">
              <p>درج عنوان الزامی است</p>
            </ion-label>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="12" size-sm="6" offset-sm="3">
          <ion-item lines="none">
            <ion-label position="floating"><h2>توضیحات</h2></ion-label>
            <ion-textarea name="description" type="text" rows="3" formControlName="description"></ion-textarea>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size-xs="12" size-sm="6" offset-sm="3" *ngIf="!form.get('description').valid && form.get('description').touched">
          <ion-item lines="none">
            <ion-label color="danger">
              <p>ارائه توضیحات الزامی است</p>
            </ion-label>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="12" size-sm="6" offset-sm="3">
          <ion-item>
            <ion-label position="floating"><h2>شدت</h2></ion-label>
            <ion-select name="severity" formControlName="severity">
              <ion-select-option value="بحرانی">بحرانی</ion-select-option>
              <ion-select-option value="غیر بحرانی">غیر بحرانی</ion-select-option>
            </ion-select>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size-xs="12" size-sm="6" offset-sm="3" *ngIf="!form.get('severity').valid && form.get('severity').touched">
          <ion-item lines="none">
            <ion-label color="danger">
              <p>ذکر شدت الزامی است</p>
            </ion-label>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="12" size-sm="6" offset-sm="3">
          <ion-item>
            <ion-label position="floating"><h2>حوزه</h2></ion-label>
            <ion-select name="sphere" formControlName="sphere">
              <ion-select-option value="طراحی">طراحی</ion-select-option>
              <ion-select-option value="ساخت تجهیزات">ساخت تجهیزات</ion-select-option>
              <ion-select-option value="احداث">احداث</ion-select-option>
            </ion-select>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size-xs="12" size-sm="6" offset-sm="3" *ngIf="!form.get('sphere').valid && form.get('sphere').touched">
          <ion-item lines="none">
            <ion-label color="danger">
              <p>ذکر حوزه الزامی است</p>
            </ion-label>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="12" size-sm="6" offset-sm="3">
          <ion-item>
            <ion-label position="floating"><h2>کد مدارک مرجع</h2></ion-label>
            <ion-input name="ref" type="text" formControlName="ref"></ion-input>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size-xs="12" size-sm="6" offset-sm="3" *ngIf="!form.get('ref').valid && form.get('ref').touched">
          <ion-item lines="none">
            <ion-label color="danger">
              <p>ذکر مدرک مرجع الزامی است</p>
            </ion-label>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <ion-button class="ion-margin" color="secondary" fill="outline" expand="block" type="submit" [disabled]="!form.valid">بروزرسانی</ion-button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </form>
</ion-content>
